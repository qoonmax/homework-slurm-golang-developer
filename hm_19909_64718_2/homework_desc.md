Напишите табличный тест на код, у которого есть по крайней мере 2 внешние зависимости (создайте интерфейсы, сгененрируйте моки через mockgen), при этом в разных тестовых кейсах эти зависимости: не используются вовсе, используется только первая, используется только вторая, используются обе. Важно корректно описать код инициализации моков и не запутаться в expectations при написании “ожиданий” от вызовов зависимостей.